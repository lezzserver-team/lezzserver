import SetupDev from './_Setup_Dev_Deployment.mdx'


# NextJS

1. **Create NextJS project**
```bash
npx create-next-app@latest
```

On installation, you'll see the following prompts:
```bash
What is your project named? my-app
Would you like to use TypeScript? No / Yes
Would you like to use ESLint? No / Yes
Would you like to use Tailwind CSS? No / Yes
Would you like to use `src/` directory? No / Yes
Would you like to use App Router? (recommended) No / Yes
Would you like to customize the default import alias (@/*)? No / Yes
What import alias would you like configured? @/*
```
we recommend use ``typescript`` and use ``App Router`` while you installing the nextjs project

<SetupDev/>

6. **Connect the app to your backend**
Add new file ```src/app/Provider.tsx```, init a new instance LezzServerReactClient and pass it to a LezzServerReactClient wrapping your app.
```jsx title="src/app/Provider.tsx"
'use client'

import { LezzServerProvider, LezzServerReactClient } from '@lezzserver/react'
const client = new LezzServerReactClient(process.env.NEXT_PUBLIC_LEZZSERVER_DEPLOYMENT_URL!)
export default function Provider({ children } : { children: React.ReactNode }) {
  return (
    <LezzServerProvider client={client}>
      {children}
    </LezzServerProvider>
  )
}
```

7. **Update Layout.tsx**\
Import our provider to ``layout.tsx``
```jsx title="src/app/layout.tsx"
import type { Metadata } from "next";
import { Inter } from "next/font/google";
import "./globals.css";
// highlight-start
import Provider from './Provider'
// highlight-end

const inter = Inter({ subsets: ["latin"] });

export const metadata: Metadata = {
  title: "Create Next App",
  description: "Generated by create next app",
};

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  return (
    <html lang="en">
      <body className={inter.className}>
      // highlight-start
        <Provider>
          {children}
        </Provider>
      // highlight-end
      </body>
    </html>
  );
}

````

7. **Integrate the backend into your frontend**
In ```src/app/page.tsx```, use the useQuery hook to fetch from your ```api.todo.listTodo``` API function and display the data.
and use the useMutation hook to mutate from you ```api.todo.createTodo```

```jsx title="src/app/page.tsx"
'use client'

import { useState } from 'react'
import { useQuery, useMutation } from '@lezzserver/react'
import { api } from '../../lezzserver/_generated/api'

export default function App() {
  const [newTodo, setNewTodo] = useState("")
  const { data: todos, isLoading } = useQuery(api.todo.listTodo)
  const mutation = useMutation(api.todo.createTodo)
  const handleAddTodo = async () => {
    mutation.mutate({
      name: newTodo,
      isDone: false
    })
  }

  if (isLoading) return <div>loading ... </div>

  return (
    <div className="w-full h-screen flex flex-col items-center justify-center">
      <h1>Todo list</h1>
      <div className='grid grid-flow-col gap-3'>
        <input className='bg-gray-900 border border-gray-950' type="text" value={newTodo} onChange={(e) => setNewTodo(e.target.value)} />
        <button className='bg-gray-900 p-2' onClick={handleAddTodo}> Add </button>
      </div>
      <div className="card">
        {
          todos?.map((todo) => {
            return (
              <div key={todo.id}>
                <span>{todo.name}</span>
                <span><input type="checkbox" disabled={true} checked={Boolean(todo.isDone)} /></span>
              </div>
            )
          })
        }
      </div>
    </div>
  )
}
```

8. **Adjust Environment Variables**
by default lezzserver set the environemt variables for react vite, so we need adjust it if we use nextjs
change the key from ``VITE_LEZZSERVER_DEPLOYMENT_URL`` to ``NEXT_PUBLIC_LEZZSERVER_DEPLOYMENT_URL``

```txt title=".env'
NEXT_PUBLIC_LEZZSERVER_DEPLOYMENT_URL=xxx
```

9. **Start your app**
Start the app, open http://localhost:3000/ in a browser, and see the list of todos.
```bash
npm run dev
```

